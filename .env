# ═══════════════════════════════════════════════════════════════
# MONGODB
# ═══════════════════════════════════════════════════════════════
MONGODB_URI=mongodb+srv://lazzariodigital:SgI91D5AotpDXy9o@cluster0.m9ruw.mongodb.net
MONGODB_SYSTEM_DB=db_serveflow_sys

# ═══════════════════════════════════════════════════════════════
# FUSIONAUTH AUTHENTICATION
# Configurar después de ejecutar: docker-compose -f docker-compose.fusionauth.yml up -d
# Admin Console: http://localhost:9011
# ═══════════════════════════════════════════════════════════════

ADMIN_API_URL=http://localhost:3102

# URL del servidor FusionAuth
FUSIONAUTH_URL=http://localhost:9011
NEXT_PUBLIC_FUSIONAUTH_URL=http://localhost:9011

# API Key (crear en FusionAuth > Settings > API Keys)
# Permisos requeridos (marcar todos los endpoints):
#   - Tenant: GET, POST, PUT, DELETE (para crear/eliminar tenants)
#   - Application: GET, POST, PUT, DELETE (para crear/eliminar applications)
#   - User: GET, POST, PUT, DELETE (CRUD de usuarios)
#   - Registration: GET, POST, PUT, DELETE (registros de usuarios en apps)
#   - JWT: GET (para JWKS/verificación de tokens)
FUSIONAUTH_API_KEY=TyXYfV4QvXi13uCUp8bAMA9b6kjDueBCzAc9fHeRQzltCUWFWMu6MTVV

# Tenant ID por defecto (solo necesario si NO usas createTenantWithFusionAuth)
# Si usas la función integrada, estos se crean automáticamente por tenant
FUSIONAUTH_TENANT_ID=9de7e969-c254-41a0-ba46-f48e86fe5797
NEXT_PUBLIC_FUSIONAUTH_TENANT_ID=9de7e969-c254-41a0-ba46-f48e86fe5797

# Application ID por defecto (solo necesario si NO usas createTenantWithFusionAuth)
FUSIONAUTH_APPLICATION_ID=4ad542dc-d0c3-4aad-86b3-04803a73851f
NEXT_PUBLIC_FUSIONAUTH_APPLICATION_ID=4ad542dc-d0c3-4aad-86b3-04803a73851f

# JWT Populate Lambda ID (Global - shared across all tenants)
# Adds organizationIds, tenantSlug, primaryOrganizationId to JWT claims
FUSIONAUTH_JWT_POPULATE_LAMBDA_ID=1dedcb62-57bb-49b6-8c45-debafc9c7469

# ═══════════════════════════════════════════════════════════════
# FUSIONAUTH ADMIN (Control Plane - serveflow-admin tenant)
# Crear en FusionAuth: Tenant "serveflow-admin" + Application "admin-dashboard"
# ═══════════════════════════════════════════════════════════════
# Frontend (Next.js)
NEXT_PUBLIC_FUSIONAUTH_ADMIN_TENANT_ID=9de7e969-c254-41a0-ba46-f48e86fe5797
NEXT_PUBLIC_FUSIONAUTH_ADMIN_APPLICATION_ID=4ad542dc-d0c3-4aad-86b3-04803a73851f
# Backend (NestJS)
FUSIONAUTH_ADMIN_TENANT_ID=9de7e969-c254-41a0-ba46-f48e86fe5797
FUSIONAUTH_ADMIN_APPLICATION_ID=4ad542dc-d0c3-4aad-86b3-04803a73851f

# ═══════════════════════════════════════════════════════════════
# FUSIONAUTH DOCKER (para docker-compose.fusionauth.yml)
# ═══════════════════════════════════════════════════════════════
FUSIONAUTH_DB_PASSWORD=fusionauth_dev_password
FUSIONAUTH_APP_MEMORY=512M
FUSIONAUTH_RUNTIME_MODE=development

# ═══════════════════════════════════════════════════════════════
# DOMINIO BASE
# ═══════════════════════════════════════════════════════════════
NEXT_PUBLIC_BASE_DOMAIN=localhost

# ═══════════════════════════════════════════════════════════════
# URLs INTERNAS (defaults para desarrollo)
# ═══════════════════════════════════════════════════════════════
TENANT_API_URL=http://localhost:3100
TENANT_SERVER_URL=http://localhost:3100
AI_ASSISTANT_URL=http://localhost:3200
MCP_SERVER_URL=http://localhost:3201

# ═══════════════════════════════════════════════════════════════
# CERBOS PDP (Authorization)
# ═══════════════════════════════════════════════════════════════
CERBOS_GRPC_URL=localhost:3593
CERBOS_TLS_ENABLED=false
CERBOS_POSTGRES_PASSWORD=cerbos_secret

# ═══════════════════════════════════════════════════════════════
# ENTORNO
# ═══════════════════════════════════════════════════════════════
NODE_ENV=development
NX_PLUGIN_NO_TIMEOUTS=true

